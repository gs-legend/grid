/**
 * @ag-grid-enterprise/master-detail - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue * @version v27.0.1
 * @link http://www.ag-grid.com/
' * @license Commercial
 */

/**
 * @ag-grid-enterprise/master-detail - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue * @version v27.0.1
 * @link http://www.ag-grid.com/
' * @license Commercial
 */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t=require("@ag-grid-community/core"),r=require("@ag-grid-enterprise/core"),i=(e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)},function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}),a=function(){return(a=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},o=function(e,t,r,i){var a,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(o<3?a(s):o>3?a(t,r,s):a(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},s=function(e){function r(){var t=null!==e&&e.apply(this,arguments)||this;return t.loadRowDataVersion=0,t.needRefresh=!1,t}return i(r,e),r.prototype.init=function(e,r){var i=this;this.params=r,this.comp=e,null!=r.pinned||(this.setAutoHeightClasses(),this.checkForDeprecations(),this.ensureValidRefreshStrategy(),this.addThemeToDetailGrid(),this.createDetailGrid(),this.loadRowData(),this.addManagedListener(r.node.parent,t.RowNode.EVENT_DATA_CHANGED,(function(){i.needRefresh=!0})))},r.prototype.setAutoHeightClasses=function(){var e=this.gridOptionsWrapper.isDetailRowAutoHeight(),t=e?"ag-details-row-auto-height":"ag-details-row-fixed-height",r=e?"ag-details-grid-auto-height":"ag-details-grid-fixed-height";this.comp.addOrRemoveCssClass(t,!0),this.comp.addOrRemoveDetailGridCssClass(r,!0)},r.prototype.checkForDeprecations=function(){this.params.suppressRefresh&&(console.warn("AG Grid: as of v23.2.0, cellRendererParams.suppressRefresh for Detail Cell Renderer is no longer used. Please set cellRendererParams.refreshStrategy = 'nothing' instead."),this.params.refreshStrategy="nothing")},r.prototype.ensureValidRefreshStrategy=function(){switch(this.params.refreshStrategy){case"rows":case"nothing":case"everything":return}this.params.refreshStrategy&&console.warn("AG Grid: invalid cellRendererParams.refreshStrategy = '"+this.params.refreshStrategy+"' supplied, defaulting to refreshStrategy = 'rows'."),this.params.refreshStrategy="rows"},r.prototype.addThemeToDetailGrid=function(){var e=this.environment.getTheme().theme;e&&this.comp.addOrRemoveDetailGridCssClass(e,!0)},r.prototype.createDetailGrid=function(){if(t._.missing(this.params.detailGridOptions))console.warn("AG Grid: could not find detail grid options for master detail, please set gridOptions.detailCellRendererParams.detailGridOptions");else{var e=this.gridOptionsWrapper.isDetailRowAutoHeight(),r=a({},this.params.detailGridOptions);e&&(r.domLayout="autoHeight"),this.comp.setDetailGrid(r)}},r.prototype.registerDetailWithMaster=function(e,t){var r=this.params.node.id,i=this.params.api,a={id:r,api:e,columnApi:t},o=this.params.node;i.addDetailGridInfo(r,a),o.detailGridInfo=a,this.addDestroyFunc((function(){o.detailGridInfo===a&&(i.removeDetailGridInfo(r),o.detailGridInfo=null)}))},r.prototype.loadRowData=function(){var e=this;this.loadRowDataVersion++;var t=this.loadRowDataVersion,r=this.params.getDetailRowData;if(r){r({node:this.params.node,data:this.params.node.data,successCallback:function(r){e.loadRowDataVersion===t&&e.comp.setRowData(r)},context:this.gridOptionsWrapper.getContext()})}else console.warn("AG Grid: could not find getDetailRowData for master / detail, please set gridOptions.detailCellRendererParams.getDetailRowData")},r.prototype.refresh=function(){return!this.needRefresh||"nothing"===this.params.refreshStrategy||(this.needRefresh=!1,"everything"!==this.params.refreshStrategy&&(this.loadRowData(),!0))},o([t.Autowired("environment")],r.prototype,"environment",void 0),r}(t.BeanStub),n=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),l=function(e,t,r,i){var a,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var n=e.length-1;n>=0;n--)(a=e[n])&&(s=(o<3?a(s):o>3?a(t,r,s):a(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},p=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return n(r,e),r.prototype.init=function(e){var t=this;this.params=e,this.selectAndSetTemplate();var r={addOrRemoveCssClass:function(e,r){return t.addOrRemoveCssClass(e,r)},addOrRemoveDetailGridCssClass:function(e,r){return t.eDetailGrid.classList.toggle(e,r)},setDetailGrid:function(e){return t.setDetailGrid(e)},setRowData:function(e){return t.setRowData(e)}};this.ctrl=this.createManagedBean(new s),this.ctrl.init(r,e)},r.prototype.refresh=function(){return this.ctrl&&this.ctrl.refresh()},r.prototype.destroy=function(){e.prototype.destroy.call(this)},r.prototype.selectAndSetTemplate=function(){var e=this;if(this.params.pinned)this.setTemplate('<div class="ag-details-row"></div>');else{var i=function(){e.setTemplate(r.TEMPLATE)};if(t._.missing(this.params.template))i();else if("string"==typeof this.params.template)this.setTemplate(this.params.template);else if("function"==typeof this.params.template){var a=(0,this.params.template)(this.params);this.setTemplate(a)}else console.warn("AG Grid: detailCellRendererParams.template should be function or string"),i();null==this.eDetailGrid&&console.warn('AG Grid: reference to eDetailGrid was missing from the details template. Please add ref="eDetailGrid" to the template.')}},r.prototype.setDetailGrid=function(e){if(this.eDetailGrid){var r=this.context.getBean("agGridReact"),i=r?t._.cloneObject(r):void 0,a=this.context.getBean("frameworkComponentWrapper");new t.Grid(this.eDetailGrid,e,{$scope:this.params.$scope,$compile:this.params.$compile,providedBeanInstances:{agGridReact:i,frameworkComponentWrapper:a}}),this.detailApi=e.api,this.ctrl.registerDetailWithMaster(e.api,e.columnApi),this.addDestroyFunc((function(){e.api&&e.api.destroy()}))}},r.prototype.setRowData=function(e){this.detailApi&&this.detailApi.setRowData(e)},r.TEMPLATE='<div class="ag-details-row">\n            <div ref="eDetailGrid" class="ag-details-grid"></div>\n        </div>',l([t.RefSelector("eDetailGrid")],r.prototype,"eDetailGrid",void 0),r}(t.Component),d={moduleName:t.ModuleNames.MasterDetailModule,beans:[],userComponents:[{componentName:"agDetailCellRenderer",componentClass:p}],controllers:[{controllerName:"detailCellRenderer",controllerClass:s}],dependantModules:[r.EnterpriseCoreModule]};exports.MasterDetailModule=d;